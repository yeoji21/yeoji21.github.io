<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="[JAVA] 스트림 (Stream)" /><meta name="author" content="yeoji21" /><meta property="og:locale" content="en" /><meta name="description" content="목차 스트림이란? 스트림 만들기 스트림의 중간 연산 Optional와 OptionalInt 스트림의 최종 연산" /><meta property="og:description" content="목차 스트림이란? 스트림 만들기 스트림의 중간 연산 Optional와 OptionalInt 스트림의 최종 연산" /><link rel="canonical" href="https://yeoji21.github.io/posts/stream/" /><meta property="og:url" content="https://yeoji21.github.io/posts/stream/" /><meta property="og:site_name" content="yeoji21" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-09-05T03:20:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[JAVA] 스트림 (Stream)" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@yeoji21" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"yeoji21"},"dateModified":"2021-09-26T01:41:54+09:00","datePublished":"2021-09-05T03:20:00+09:00","description":"목차 스트림이란? 스트림 만들기 스트림의 중간 연산 Optional와 OptionalInt 스트림의 최종 연산","headline":"[JAVA] 스트림 (Stream)","mainEntityOfPage":{"@type":"WebPage","@id":"https://yeoji21.github.io/posts/stream/"},"url":"https://yeoji21.github.io/posts/stream/"}</script><title>[JAVA] 스트림 (Stream) | yeoji21</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yeoji21"><meta name="application-name" content="yeoji21"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR:wght@500&display=swap" rel="stylesheet"><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/profile/img1.JPG" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">yeoji21</a></div><div class="site-subtitle font-italic">Don't look back in anger</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/yeoji21" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yeozone0508','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[JAVA] 스트림 (Stream)</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[JAVA] 스트림 (Stream)</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> yeoji21 </span> on <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Sun, Sep 5, 2021, 3:20 AM +0900" >Sep 5, 2021<i class="unloaded">2021-09-05T03:20:00+09:00</i> </span></div><div> <span> Updated <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Sun, Sep 26, 2021, 1:41 AM +0900" >Sep 26, 2021<i class="unloaded">2021-09-26T01:41:54+09:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="9776 words">54 min read</span></div></div><div class="post-content"><h2 id="목차">목차</h2><ul><li>스트림이란?<li>스트림 만들기<li>스트림의 중간 연산<li>Optional<T>와 OptionalInt</T><li>스트림의 최종 연산</ul><h3 id="스트림이란"><strong>스트림이란?</strong></h3><p>지금까지 우리는 많은 수의 데이터를 다룰 때, 컬렉션이나 배열에 데이터를 담은 뒤 원하는 결과를 얻기 위해 <code class="language-plaintext highlighter-rouge">for문</code>과 <code class="language-plaintext highlighter-rouge">Iterator</code>를 이용해서 코드를 작성했다. 그러나 이런 방식으로 작성된 코드는 너무 길고 알아보기 힘들뿐더러 코드의 재사용성도 떨어진다.</p><p>또 다른 문제는 데이터 소스마다 다른 방식으로 다뤄야한다는 것인데, <code class="language-plaintext highlighter-rouge">Collection</code>이나 <code class="language-plaintext highlighter-rouge">Iterator</code>와 같은 인터페이스를 이용해서 컬렉션을 다루는 방식을 표준화하기는 했지만</p><p>각 컬렉션 클래스에는 같은 기능의 메소드들이 중복해서 정의되어 있다. 예를 들어 <code class="language-plaintext highlighter-rouge">List</code>를 정렬할 때는 <code class="language-plaintext highlighter-rouge">Collections.sort()</code>를 사용해야하고, 배열을 정렬할 때는 <code class="language-plaintext highlighter-rouge">Arrays.sort()</code>를 사용해야 한다.</p><p>이러한 문제점들을 해결하기 위해서 만든 것이 <code class="language-plaintext highlighter-rouge">스트림(stream)</code>이다. 스트림은 데이터 소스를 추상화하고, 데이터를 다루는데 자주 사용되는 메소드들을 정의해 놓았다. 따라서 데이터 소스가 무엇이던 간에 같은 방식으로 다룰 수 있게 되었고 코드의 재사용성이 향상되었다.</p><p>스트림을 사용하면, 배열이나 컬렉션뿐만 아니라 파일에 저장된 데이터도 모두 같은 방식으로 다룰 수 있다.</p><p>예를 들어, 같은 내용을 저장하는 <code class="language-plaintext highlighter-rouge">문자열 배열</code>과 <code class="language-plaintext highlighter-rouge">List</code>가 있을 때,</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">String</span><span class="o">[]</span> <span class="n">arr</span> <span class="o">=</span> <span class="o">{</span><span class="s">"aaa"</span><span class="o">,</span> <span class="s">"ddd"</span><span class="o">,</span> <span class="s">"ccc"</span><span class="o">};</span>
<span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">arr</span><span class="o">);</span>
</pre></table></code></div></div><p>이 두가지 데이터 소스를 기반으로 하는 스트림의 생성 방법은 아래와 같다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream1</span> <span class="o">=</span> <span class="n">list</span><span class="o">.</span><span class="na">stream</span><span class="o">();</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream2</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">arr</span><span class="o">);</span>
</pre></table></code></div></div><p>두 가지 스트림으로 데이터 소스의 데이터를 읽어서 정렬하고 화면에 출력하는 방법은 다음과 같다. 데이터 소스가 정렬되는 것은 아니라는 점에 유의하자</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">stream1</span><span class="o">.</span><span class="na">sorted</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="n">stream2</span><span class="o">.</span><span class="na">sorted</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><p>이 두 스트림의 데이터 소스는 서로 다르지만, 정렬하고 출력하는 방법은 완전히 동일한 것을 알 수 있다.</p><h4 id="스트림은-데이터-소스를-변경하지-않는다">스트림은 데이터 소스를 변경하지 않는다.</h4><p>스트림은 데이터 소스로부터 데이터를 읽기만할 뿐, 데이터 소스를 변경하지 않는다는 차이가 있다. 필요하다면, 변경된 결과를 컬렉션이나 배열에 담아서 반환할 수도 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">sortedList</span> <span class="o">=</span> <span class="n">stream1</span><span class="o">.</span><span class="na">sorted</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>
</pre></table></code></div></div><h4 id="스트림은-일회용이다">스트림은 일회용이다.</h4><p>스트림은 <code class="language-plaintext highlighter-rouge">Iterator</code>처럼 일회용이다. 따라서 컬렉션의 요소를 모두 읽고 나면 다시 사용할 수 없기때문에 필요하다면 스트림을 다시 생성해야 한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">stream1</span><span class="o">.</span><span class="na">sorted</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
<span class="kt">long</span> <span class="n">count</span> <span class="o">=</span> <span class="n">stream1</span><span class="o">.</span><span class="na">count</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">count</span><span class="o">);</span>
</pre></table></code></div></div><div lang="console" class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="go">Exception in thread "main" java.lang.IllegalStateException: stream has already been operated upon or closed
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:229)
	at java.base/java.util.stream.ReferencePipeline.count(ReferencePipeline.java:605)
	at com.example.javastudy.week15.StreamEx.main(StreamEx.java:17)
</span></pre></table></code></div></div><h4 id="스트림은-작업을-내부-반복으로-처리한다">스트림은 작업을 내부 반복으로 처리한다.</h4><p>스트림은 반복문을 메소드의 내부에 숨기는 <strong>내부 반복</strong>을 사용하기 때문에 간결한 작업이 가능한 것이다. <code class="language-plaintext highlighter-rouge">forEach()</code>는 매개변수에 대입된 람다식을 데이터 소스의 모든 요소에 적용한다.</p><p>즉, <code class="language-plaintext highlighter-rouge">forEach()</code>는 메소드 안으로 <code class="language-plaintext highlighter-rouge">for문</code>을 넣은 것이다. 수행할 작업은 매개변수로 받는다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">forEach</span><span class="o">(</span><span class="nc">Consumer</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">action</span><span class="o">){</span>
    <span class="nc">Objects</span><span class="o">.</span><span class="na">requireNonNull</span><span class="o">(</span><span class="n">action</span><span class="o">);</span> <span class="c1">//매개변수 null 체크</span>

    <span class="k">for</span><span class="o">(</span><span class="no">T</span> <span class="n">t</span> <span class="o">:</span> <span class="n">src</span><span class="o">){</span>                 <span class="c1">//내부반복</span>
        <span class="n">action</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="no">T</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h4 id="스트림의-연산">스트림의 연산</h4><p>스트림이 제공하는 연산은 <code class="language-plaintext highlighter-rouge">중간 연산</code>과 <code class="language-plaintext highlighter-rouge">최종 연산</code>으로 분류할 수 있는데, 중간 연산은 연산 결과를 스트림으로 반환하기 때문에 중간 연산을 연속해서 연결할 수 있다. 반면에 최종 연산은 스트림의 요소를 소모하면서 연산을 수행하므로 단 한번만 연산이 가능하다.</p><div class="table-wrapper"><table><thead><tr><th style="text-align: right">중간연산<th style="text-align: right">설명<tbody><tr><td style="text-align: right">Stream&lt;T&gt; <strong>distinct()</strong><td style="text-align: right">중복을 제거<tr><td style="text-align: right">Stream&lt;T&gt; <strong>filter(Predicate&lt;T&gt; predicate)</strong><td style="text-align: right">조건에 안맞는 요소 제외<tr><td style="text-align: right">Stream&lt;T&gt; <strong>limit(long maxSize)</strong><td style="text-align: right">스트림의 일부를 잘라냄<tr><td style="text-align: right">Stream&lt;T&gt; <strong>skip(long n)</strong><td style="text-align: right">스트림의 일부를 건너뜀<tr><td style="text-align: right">Stream&lt;T&gt; <strong>peek(Consumer&lt;T&gt; action)</strong><td style="text-align: right">스트림의 요소에 작업 수행<tr><td style="text-align: right">Stream&lt;T&gt; <strong>sorted()</strong> <br /> Stream&lt;T&gt; <strong>sorted(Comparator&lt;T&gt; comparator)</strong><td style="text-align: right">스트림의 요소를 정렬<tr><td style="text-align: right">Stream&lt;R&gt; <strong>map(Function&lt;T,R&gt; mapper)</strong> <br /> DoubleStream <strong>mapToDouble(ToDoubleFunction&lt;T&gt; mapper)</strong> <br /> IntStream <strong>mapToInt(ToIntFunction&lt;T&gt; mapper)</strong> <br /> LongStream <strong>mapToLong(ToLongFunction&lt;T&gt; mapper)</strong> <br /> <br /> Stream&lt;R&gt; <strong>flatMap(Function&lt;T, Stream&lt;R&gt;&gt; mapper)</strong> <br /> DoubleStream <strong>flatMapToDouble(Function&lt;T,DoubleStream&gt; m)</strong> <br /> IntStream <strong>flatMapToInt(Function&lt;T,IntStream&gt; m)</strong> <br /> LongStream <strong>flatMapToLong(Function&lt;T,LongStream&gt; m)</strong><td style="text-align: right">스트림의 요소를 반환</table></div><p><br /></p><div class="table-wrapper"><table><thead><tr><th style="text-align: right">최종연산<th style="text-align: right">설명<tbody><tr><td style="text-align: right">void <strong>forEach(Consumer&lt;? super T&gt; action)</strong> <br /> void <strong>forEachOrdered(Consumer&lt;? super T&gt; action)</strong><td style="text-align: right">각 요소에 지정된 작업 수행<tr><td style="text-align: right">long <strong>count()</strong><td style="text-align: right">스트림의 요소의 개수 반환<tr><td style="text-align: right">Optional&lt;T&gt; <strong>max(Comparator&lt;? super T&gt; c)</strong> <br /> Optional&lt;T&gt; <strong>min(Comparator&lt;? super T&gt; c)</strong><td style="text-align: right">스트림의 최대값/최소값 반환<tr><td style="text-align: right">Optional&lt;T&gt; <strong>findAny()</strong> <br /> Optional&lt;T&gt; <strong>findFirst()</strong><td style="text-align: right">스트림의 요소 하나 반환<tr><td style="text-align: right">boolean <strong>allMatch(Predicate&lt;T&gt; p)</strong> <br /> boolean <strong>anyMatch(Predicate&lt;T&gt; p)</strong> <br /> boolean <strong>noneMatch(Predicate&lt;T&gt; p)</strong><td style="text-align: right">주어진 조건을 만족하는지<tr><td style="text-align: right">Object[] <strong>toArray()</strong> <br /> A[] <strong>toArray(IntFunction&lt;A[]&gt; generator)</strong><td style="text-align: right">스트림의 모든 요소를 배열로 반환<tr><td style="text-align: right">Optional&lt;T&gt; <strong>reduce(BunaryOperator&lt;T&gt; a)</strong> <br /> T <strong>reduce(T identity, BunaryOperator&lt;T&gt; a)</strong> <br /> U <strong>reduce(I identity, BunaryOperator&lt;U,T,U&gt; a, <br />BunaryOperator&lt;T&gt; combiner)</strong><td style="text-align: right">스트림의 요소를 하나씩 줄여가면서 계산<tr><td style="text-align: right">R <strong>collect(Collector&lt;T,A,R&gt; collector)</strong> <br /> R <strong>collect(Supplier&lt;R&gt; s, BiConsumer&lt;R,T&gt; a, <br /> BiConsumer&lt;R,R&gt; c)</strong><td style="text-align: right">스트림의 요소를 수집</table></div><p>앞으로 이 메소드들을 하나씩 설명할텐데, 중간연산은 <code class="language-plaintext highlighter-rouge">map()</code>과 <code class="language-plaintext highlighter-rouge">flatMap()</code>, 최종연산은 <code class="language-plaintext highlighter-rouge">reduce()</code>와 <code class="language-plaintext highlighter-rouge">collect()</code>가 핵심이다. 나머지 메소드는 이해하기도 쉽고 사용법도 간단하다.</p><h4 id="지연된-연산">지연된 연산</h4><p>스트림 연산에서 중간 연산은 최종 연산이 수행되기 전까지 수행되지 않는다. 스트림에 대해 <code class="language-plaintext highlighter-rouge">distinct()</code>나 <code class="language-plaintext highlighter-rouge">sort()</code>같은 중간 연산을 호출해도 즉각적인 연산이 수행되지 않고, 최종 연산이 수행되어야 비로소 스트림의 요소들이 중간 연산을 거쳐 최종 연산에서 소모된다.</p><h4 id="stream와-intstream">Stream<Integer>와 IntStream</Integer></h4><p>요소의 타입이 <code class="language-plaintext highlighter-rouge">T</code>인 스트림은 기본적으로 <code class="language-plaintext highlighter-rouge">Stream&lt;T&gt;</code>이지만, 오토박싱&amp;언박싱으로 인한 비효율을 줄이기 위해 데이터 소스의 요소를 기본형으로 다루는 스트림인 <code class="language-plaintext highlighter-rouge">IntStream</code>, <code class="language-plaintext highlighter-rouge">LongStream</code>, <code class="language-plaintext highlighter-rouge">DoubleStream</code>이 제공된다.</p><p>일반적으로 <code class="language-plaintext highlighter-rouge">Stream&lt;Integer&gt;</code> 대신 <code class="language-plaintext highlighter-rouge">IntStream</code>을 사용하는 것이 더 효율적이고, <code class="language-plaintext highlighter-rouge">int</code>타입의 값으로 작업하는데 유용한 메소드들이 포함되어 있다.</p><h4 id="병렬-스트림">병렬 스트림</h4><p>스트림으로 데이터를 다룰 때의 장점 중 하나로 병렬 처리가 쉽다는 점도 있는데, 스트림에 <code class="language-plaintext highlighter-rouge">parallel()</code>이라는 메소드를 호출해서 병렬로 연산을 수행하도록 지시하면 끝이다.</p><p>반대로 병렬로 처리되지 않게 하려면 <code class="language-plaintext highlighter-rouge">sequencial()</code>을 호출하면 되는데, 모든 스트림은 기본적으로 병렬 스트림이 아니므로 <code class="language-plaintext highlighter-rouge">parallel()</code>을 취소할 때만 사용하면 된다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">stream1</span><span class="o">.</span><span class="na">parallel</span><span class="o">()</span>
                <span class="o">.</span><span class="na">mapToInt</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">length</span><span class="o">())</span>
                <span class="o">.</span><span class="na">sum</span><span class="o">();</span>
</pre></table></code></div></div><blockquote><p>병렬처리가 항상 더 빠른 결과를 얻게 해주는 것은 아니라는 점을 명심하자.</p></blockquote><h3 id="스트림-만들기"><strong>스트림 만들기</strong></h3><p>스트림의 소스가 될 수 있는 대상은 배열, 컬렉션, 임의의 수 등으로 다양하며, 다양한 소스들로부터 스트림을 생성하는 방법을 하나씩 알아보자.</p><h4 id="컬렉션">컬렉션</h4><p>컬렉션의 최고 조상인 <code class="language-plaintext highlighter-rouge">Collection</code>에 <code class="language-plaintext highlighter-rouge">stream()</code>이 정의되어 있다. 그래서 <code class="language-plaintext highlighter-rouge">Collection</code>을 구현한 자식 클래스인 <code class="language-plaintext highlighter-rouge">List</code>와 <code class="language-plaintext highlighter-rouge">Set</code>을 구현한 클래스들은 모두 이 메소드를 통해 스트림을 생성할 수 있다. <code class="language-plaintext highlighter-rouge">stream()</code>은 해당 컬렉션을 소스(source)로 하는 스트림을 반환한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Collection</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
</pre></table></code></div></div><h4 id="배열">배열</h4><p>배열을 소스로하는 스트림을 생성하는 메소드는 <code class="language-plaintext highlighter-rouge">Stream</code>과 <code class="language-plaintext highlighter-rouge">Arrays</code>에 static 메소드로 정의되어 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="no">T</span><span class="o">...</span><span class="na">values</span><span class="o">)</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="no">T</span><span class="o">[])</span>

<span class="nc">Stream</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="no">T</span><span class="o">[])</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="no">T</span><span class="o">[]</span> <span class="n">array</span><span class="o">,</span> <span class="kt">int</span> <span class="n">startInclusive</span><span class="o">,</span> <span class="kt">int</span> <span class="n">endExclusive</span><span class="o">)</span>
</pre></table></code></div></div><p>예를 들어 문자열 스트림은 다음과 같이 생성한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream1</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"a"</span><span class="o">,</span> <span class="s">"b"</span><span class="o">,</span> <span class="s">"c"</span><span class="o">);</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream2</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"a"</span><span class="o">,</span> <span class="s">"b"</span><span class="o">,</span> <span class="s">"c"</span><span class="o">});</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream3</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"a"</span><span class="o">,</span> <span class="s">"b"</span><span class="o">,</span> <span class="s">"c"</span><span class="o">});</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream4</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"a"</span><span class="o">,</span> <span class="s">"b"</span><span class="o">,</span> <span class="s">"c"</span><span class="o">},</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
</pre></table></code></div></div><p>그리고 <code class="language-plaintext highlighter-rouge">int</code>, <code class="language-plaintext highlighter-rouge">long</code>, <code class="language-plaintext highlighter-rouge">double</code>과 같은 기본형 배열을 소스로 하는 스트림을 생성하는 메소드도 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="kt">int</span><span class="o">...</span> <span class="n">values</span><span class="o">)</span>
<span class="nc">IntStream</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="kt">int</span><span class="o">[])</span>
<span class="nc">IntStream</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="kt">int</span><span class="o">[])</span>
<span class="nc">IntStream</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">array</span><span class="o">,</span> <span class="kt">int</span> <span class="n">startInclusive</span><span class="o">,</span> <span class="kt">int</span> <span class="n">endExclusive</span><span class="o">)</span>
</pre></table></code></div></div><p>이 외에도 <code class="language-plaintext highlighter-rouge">long</code>과 <code class="language-plaintext highlighter-rouge">double</code>타입의 배열로부터 <code class="language-plaintext highlighter-rouge">LongStream</code>과 <code class="language-plaintext highlighter-rouge">DoubleStream</code>을 생성하는 메소드도 있으나 쉽게 유추할 수 있으므로 생략한다.</p><h4 id="특정-범위의-정수">특정 범위의 정수</h4><p><code class="language-plaintext highlighter-rouge">IntStream</code>과 <code class="language-plaintext highlighter-rouge">LongStream</code>은 지정된 범위의 연속된 정수를 스트림으로 생성해서 반환하는 <code class="language-plaintext highlighter-rouge">range()</code>와 <code class="language-plaintext highlighter-rouge">rangeClosed()</code>를 가지고 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="kt">int</span> <span class="n">begin</span><span class="o">,</span> <span class="kt">int</span> <span class="n">end</span><span class="o">)</span>
<span class="nc">IntStream</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="kt">int</span> <span class="n">begin</span><span class="o">,</span> <span class="kt">int</span> <span class="n">end</span><span class="o">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">range()</code>의 경우, 경계의 끝인 <code class="language-plaintext highlighter-rouge">end</code>가 포함되지 않고 <code class="language-plaintext highlighter-rouge">rangeClosed()</code>의 경우에는 포함된다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="n">stream1</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">range</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span>
<span class="nc">IntStream</span> <span class="n">stream2</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">5</span><span class="o">);</span>
<span class="n">stream1</span><span class="o">.</span><span class="na">forEach</span><span class="o">((</span><span class="n">s</span><span class="o">)-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">s</span><span class="o">+</span><span class="s">" "</span><span class="o">));</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
<span class="n">stream2</span><span class="o">.</span><span class="na">forEach</span><span class="o">((</span><span class="n">s</span><span class="o">)-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">s</span><span class="o">+</span><span class="s">" "</span><span class="o">));</span>
</pre></table></code></div></div><div lang="console" class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="go">1 2 3 4 
1 2 3 4 5 
</span></pre></table></code></div></div><h4 id="임의의-수">임의의 수</h4><p>난수를 생성하는데 사용하는 <code class="language-plaintext highlighter-rouge">Random</code>클래스에는 아래와 같은 인스턴스 메소드들이 포함되어 있다. 이 메소드들은 해당 타입의 난수들로 이루어진 스트림을 반환한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="nf">ints</span><span class="o">()</span>
<span class="nc">LongStream</span> <span class="nf">longs</span><span class="o">()</span>
<span class="nc">DoubleStream</span> <span class="nf">doubles</span><span class="o">()</span>
</pre></table></code></div></div><p>이 메소드들이 반환하는 스트림은 크기가 정해지지 않은 <code class="language-plaintext highlighter-rouge">무한 스트림(infinite stream)</code>이기 때문에 <code class="language-plaintext highlighter-rouge">limit()</code>도 같이 사용해서 스트림의 크기를 제한해주어야 한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="n">intStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">().</span><span class="na">ints</span><span class="o">();</span>
<span class="n">intStream</span><span class="o">.</span><span class="na">limit</span><span class="o">(</span><span class="mi">5</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><p>혹은 매개변수로 스트림의 크기를 전달해서 유한 스트림을 반환받을 수도 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="nf">ints</span><span class="o">(</span><span class="kt">long</span> <span class="n">streamSize</span><span class="o">)</span>
<span class="nc">LongStream</span> <span class="nf">longs</span><span class="o">(</span><span class="kt">long</span> <span class="n">streamSize</span><span class="o">)</span>
<span class="nc">DoubleStream</span> <span class="nf">doubles</span><span class="o">(</span><span class="kt">long</span> <span class="n">streamSize</span><span class="o">)</span>
<span class="o">...</span>
<span class="nc">IntStream</span> <span class="n">intStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">().</span><span class="na">ints</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
</pre></table></code></div></div><p>단, 위의 메소드들로 생성된 스트림의 난수는 아래의 범위를 갖는다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>               <span class="nc">Integer</span><span class="o">.</span><span class="na">MIN_VALUE</span> <span class="o">&lt;=</span> <span class="n">ints</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span>
                  <span class="nc">Long</span><span class="o">.</span><span class="na">MIN_VALUE</span> <span class="o">&lt;=</span> <span class="n">longs</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="nc">Long</span><span class="o">.</span><span class="na">MAX_VALUE</span>
                             <span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="n">doubles</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mf">1.0</span>
</pre></table></code></div></div><p>지정된 범위의 난수를 발생시키는 스트림을 얻는 메소드는 아래와 같다. 단, <code class="language-plaintext highlighter-rouge">end</code>는 범위에 포함되지 않는다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="nf">ints</span><span class="o">(</span><span class="kt">int</span> <span class="n">begin</span><span class="o">,</span> <span class="kt">int</span> <span class="n">end</span><span class="o">)</span>
<span class="nc">LongStream</span> <span class="nf">longs</span><span class="o">(</span><span class="kt">long</span> <span class="n">begin</span><span class="o">,</span> <span class="kt">long</span> <span class="n">end</span><span class="o">)</span>
<span class="nc">DoubleStream</span> <span class="nf">doubles</span><span class="o">(</span><span class="kt">double</span> <span class="n">begin</span><span class="o">,</span> <span class="kt">double</span> <span class="n">end</span><span class="o">)</span>

<span class="nc">IntStream</span> <span class="nf">ints</span><span class="o">(</span><span class="kt">long</span> <span class="n">streamSize</span><span class="o">,</span> <span class="kt">int</span> <span class="n">begin</span><span class="o">,</span> <span class="kt">int</span> <span class="n">end</span><span class="o">)</span>
<span class="nc">LongStream</span> <span class="nf">longs</span><span class="o">(</span><span class="kt">long</span> <span class="n">streamSize</span><span class="o">,</span> <span class="kt">long</span> <span class="n">begin</span><span class="o">,</span> <span class="kt">long</span> <span class="n">end</span><span class="o">)</span>
<span class="nc">DoubleStream</span> <span class="nf">doubles</span><span class="o">(</span><span class="kt">long</span> <span class="n">streamSize</span><span class="o">,</span> <span class="kt">double</span> <span class="n">begin</span><span class="o">,</span> <span class="kt">double</span> <span class="n">end</span><span class="o">)</span>
</pre></table></code></div></div><h4 id="람다식---iterate-generate">람다식 - iterate(), generate()</h4><p><code class="language-plaintext highlighter-rouge">Stream</code>클래스의 <code class="language-plaintext highlighter-rouge">iterate()</code>와 <code class="language-plaintext highlighter-rouge">generate()</code>는 람다식을 매개변수로 받아서 이 람다식에 의해 계산되는 값들을 요소로 하는 무한 스트림을 생성한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Stream</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">iterate</span><span class="o">(</span><span class="no">T</span> <span class="n">seed</span><span class="o">,</span> <span class="nc">UnaryOperator</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">)</span>
<span class="kd">static</span> <span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nc">Stream</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">generate</span><span class="o">(</span><span class="nc">Supplier</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">s</span><span class="o">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">iterate()</code>는 <code class="language-plaintext highlighter-rouge">seed</code>값으로 지정된 값부터 시작해서 람다식 f에 의해 계산된 결과를 다시 <code class="language-plaintext highlighter-rouge">seed</code>값으로 해서 계산을 반복한다. 아래의 스트림은 0부터 시작해서 값이 2씩 계속 증가하는 무한 스트림이다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">evenStream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">iterate</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">n</span> <span class="o">-&gt;</span> <span class="n">n</span><span class="o">+</span><span class="mi">2</span><span class="o">);</span>
</pre></table></code></div></div><p><br /></p><p><code class="language-plaintext highlighter-rouge">generate()</code>도 람다식에 의해 계산되는 값을 요소로 하는 무한 스트림을 생성해서 반환하지만, <code class="language-plaintext highlighter-rouge">iterate()</code>와 달리 이전 결과를 이용해서 다음 요소를 계산하지는 않는다. <code class="language-plaintext highlighter-rouge">generate()</code>에 정의된 매개변수의 타입은 <code class="language-plaintext highlighter-rouge">Supplier&lt;T&gt;</code>이므로 매개변수가 없는 람다식만 허용된다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">generate</span><span class="o">(</span><span class="nl">Math:</span><span class="o">:</span><span class="n">random</span><span class="o">);</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">generate</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">generate</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="mi">1</span><span class="o">);</span>
</pre></table></code></div></div><p>또한, <code class="language-plaintext highlighter-rouge">iterate()</code>와 <code class="language-plaintext highlighter-rouge">generate()</code>로 생성된 스트림을 <code class="language-plaintext highlighter-rouge">IntStream</code> 같은 기본향 스트림 타입의 참조변수로 다룰 수 없으므로 주의해야 한다.</p><blockquote><p>굳이 필요하다면 mapToInt()와 같은 메소드로 변환해야 한다.</p></blockquote><h4 id="파일">파일</h4><p><code class="language-plaintext highlighter-rouge">java.nio.file.Files</code>는 파일을 다루는데 필요한 메소드들을 제공하는데, <code class="language-plaintext highlighter-rouge">list()</code>는 지정된 디렉토리에 있는 파일의 목록을 소스로 하는 스트림을 생성해서 반환한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Path</span><span class="o">&gt;</span> <span class="nc">Files</span><span class="o">.</span><span class="na">list</span><span class="o">(</span><span class="nc">Path</span> <span class="n">dir</span><span class="o">)</span>
</pre></table></code></div></div><p>이 외에도 <code class="language-plaintext highlighter-rouge">Files</code>클래스에 <code class="language-plaintext highlighter-rouge">Path</code>를 요소로 하는 스트림을 생성하는 메소드가 더 있으니 관심있다면 추가로 찾아보길 바란다.</p><h4 id="빈-스트림">빈 스트림</h4><p>요소가 하나도 없는 빈 스트림을 생성할 수도 있다 스트림에 연산을 수행한 결과가 하나도 없을 때, <code class="language-plaintext highlighter-rouge">null</code>을 반환하는 것보다 빈 스트림을 반환하는 것이 더 나을 수 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">Stream</span> <span class="n">emptyStream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">empty</span><span class="o">();</span>
</pre></table></code></div></div><h4 id="두-스트림의-연결">두 스트림의 연결</h4><p><code class="language-plaintext highlighter-rouge">Stream</code>의 <code class="language-plaintext highlighter-rouge">static</code>메소드인 <code class="language-plaintext highlighter-rouge">concat()</code>을 사용하면 두 스트림을 하나로 연결할 수 있다. 단, 이 때 두 스트림의 요소는 같은 타입이어야 한다.</p><h3 id="스트림의-중간-연산"><strong>스트림의 중간 연산</strong></h3><h4 id="스트림-자르기---skip-limit">스트림 자르기 - skip(), limit()</h4><p><code class="language-plaintext highlighter-rouge">skip(n)</code>은 처음 n개의 요소를 건너뛰고, <code class="language-plaintext highlighter-rouge">limit(n)</code>은 스트림의 요소를 n개로 제한한다.</p><h4 id="스트림의-요소-걸러내기---filter-distinct">스트림의 요소 걸러내기 - filter(), distinct()</h4><p><code class="language-plaintext highlighter-rouge">distinct()</code>는 스트림에서 중복된 요소들을 제거하고, <code class="language-plaintext highlighter-rouge">filter()</code>는 주어진 조건(Predicate)에 맞지 않는 요소를 걸러낸다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">stream1</span><span class="o">.</span><span class="na">distinct</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">filter()</code>는 매개변수로 <code class="language-plaintext highlighter-rouge">Predicate</code>를 필요로 하는데, 아래와 같이 연산 결과가 <code class="language-plaintext highlighter-rouge">boolean</code>인 람다식을 사용해도 된다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="n">intStream</span> <span class="o">=</span> <span class="nc">IntStream</span><span class="o">.</span><span class="na">rangeClosed</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">10</span><span class="o">);</span>
<span class="n">intStream</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="n">i</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><h4 id="정렬---sorted">정렬 - sorted()</h4><p><code class="language-plaintext highlighter-rouge">sorted()</code>는 지정된 <code class="language-plaintext highlighter-rouge">Comparator</code>로 스트림을 정렬하는데, <code class="language-plaintext highlighter-rouge">Comparator</code>대신 int값을 반환하는 람다식을 사용하는 것도 가능하다. <code class="language-plaintext highlighter-rouge">Comparator</code>를 지정하지 않으면 스트림 요소의 기본 정렬 기준인 <code class="language-plaintext highlighter-rouge">Comparable</code>으로 정렬한다.</p><blockquote><p>이 때 스트림의 요소가 Comparable을 구현한 클래스가 아니면 예외가 발생한다.</p></blockquote><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">sorted</span><span class="o">()</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">sorted</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">comparator</span><span class="o">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">JDK 1.8</code>부터 <code class="language-plaintext highlighter-rouge">Comparator</code>인터페이스에 <code class="language-plaintext highlighter-rouge">static</code>메소드와 <code class="language-plaintext highlighter-rouge">default</code>메소드가 많이 추가되었는데, 이 메소드들을 이용하면 정렬이 쉬워진다. 이 메소드들은 모두 <code class="language-plaintext highlighter-rouge">Comparator&lt;T&gt;</code>를 반환하며, 아래의 메소드 목록은 제네릭에서 와일드 카드부분을 제거하여 간략화한 것이므로, 정확한 메소드 선언이 궁금하면 Java API 문서를 참조하자.</p><p><strong>Comparator의 default methods</strong></p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">reversed</span><span class="o">()</span>
<span class="n">thenComparing</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">other</span><span class="o">)</span>
<span class="n">thenComparing</span><span class="o">(</span><span class="nc">Function</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">,</span> <span class="o">?</span> <span class="kd">extends</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">)</span>
<span class="n">thenComparing</span><span class="o">(</span><span class="nc">Function</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">,</span> <span class="o">?</span> <span class="kd">extends</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">,</span>
                                    <span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">keyComparator</span><span class="o">)</span>
<span class="n">thenComparingInt</span><span class="o">(</span><span class="nc">ToIntFunction</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">)</span>
<span class="n">thenComparingLong</span><span class="o">(</span><span class="nc">ToLongFunction</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">)</span>
<span class="n">thenComparingDouble</span><span class="o">(</span><span class="nc">ToDoubleFunction</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">)</span>
</pre></table></code></div></div><p><strong>Comparator의 static methods</strong></p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="n">reverseOrder</span><span class="o">()</span>
<span class="n">naturalOrder</span><span class="o">()</span>
<span class="n">comparing</span><span class="o">(</span><span class="nc">Function</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">,</span> <span class="o">?</span> <span class="kd">extends</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">)</span>
<span class="n">comparing</span><span class="o">(</span><span class="nc">Function</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">,</span> <span class="o">?</span> <span class="kd">extends</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">,</span>
                                <span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">keyComparator</span><span class="o">)</span>
<span class="n">comparingInt</span><span class="o">(</span><span class="nc">ToIntFunction</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">)</span>
<span class="n">comparingLong</span><span class="o">(</span><span class="nc">ToLongFunction</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">)</span>
<span class="n">comparingDouble</span><span class="o">(</span><span class="nc">ToDoubleFunction</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">keyExtractor</span><span class="o">)</span>
<span class="n">nullsFirst</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">comparator</span><span class="o">)</span>
<span class="n">nullsLast</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">comparator</span><span class="o">)</span>
</pre></table></code></div></div><p>정렬에 사용되는 메소드의 개수가 많지만, 가장 기본적인 메소드는 <code class="language-plaintext highlighter-rouge">comparing()</code>이다. 스트림의 요소가 <code class="language-plaintext highlighter-rouge">Comparable</code>을 구현한 경우, 매개변수 하나짜리를 사용하면 되고, 그렇지 않은 경우, 추가적인 매개변수로 정렬기준(Comparator)를 지정해주어야 한다.</p><p>만약 비교대상이 기본형인 경우, <code class="language-plaintext highlighter-rouge">comparing()</code>대신 <code class="language-plaintext highlighter-rouge">comparingInt()</code>등을 사용하면 오토박싱과 언박싱과정이 없어서 더 효율적이다.</p><p>그리고 정렬 조건을 추가할 때는 <code class="language-plaintext highlighter-rouge">thenComparing()</code>을 사용한다.</p><p>예를 들어, 학생 스트림을 반별, 성적순, 이름순으로 정렬하여 출력하려면 다음과 같이 한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="n">studentStream</span><span class="o">.</span><span class="na">sorted</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">.</span><span class="na">comparing</span><span class="o">(</span><span class="nl">Strudent:</span><span class="o">:</span><span class="n">getBan</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">thenComparing</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getTotalScore</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">thenComparing</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getName</span><span class="o">))</span>
                                <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><p>이해를 돕기 위해 학생의 성적을 반별 오름차순, 총점별 내림차순으로 정렬하여 출력하는 예제를 살펴보자.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">StreamEx</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">studentStream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"여자바"</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">300</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"김자바"</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">200</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"안자바"</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">100</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"박자바"</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">150</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"소자바"</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">200</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"이자바"</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">290</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"김자바"</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">180</span><span class="o">)</span>
        <span class="o">);</span>

        <span class="n">studentStream</span><span class="o">.</span><span class="na">sorted</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">.</span><span class="na">comparing</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getBan</span><span class="o">)</span>
                                        <span class="o">.</span><span class="na">thenComparing</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">.</span><span class="na">naturalOrder</span><span class="o">()))</span>
                <span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

    <span class="o">}</span>
<span class="o">}</span>

<span class="nd">@Getter</span>
<span class="kd">class</span> <span class="nc">Student</span> <span class="kd">implements</span> <span class="nc">Comparable</span><span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">ban</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">totalScore</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Student</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">ban</span><span class="o">,</span> <span class="kt">int</span> <span class="n">totalScore</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">ban</span> <span class="o">=</span> <span class="n">ban</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">totalScore</span> <span class="o">=</span> <span class="n">totalScore</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"[%s %d, %d]"</span><span class="o">,</span><span class="n">name</span><span class="o">,</span> <span class="n">ban</span><span class="o">,</span> <span class="n">totalScore</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">((</span><span class="nc">Student</span><span class="o">)</span><span class="n">o</span><span class="o">).</span><span class="na">totalScore</span> <span class="o">-</span> <span class="k">this</span><span class="o">.</span><span class="na">totalScore</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div lang="console" class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="go">[김자바 1, 200]
[소자바 1, 200]
[박자바 2, 150]
[안자바 2, 100]
[여자바 3, 300]
[이자바 3, 290]
[김자바 3, 180]
</span></pre></table></code></div></div><h4 id="변환---map">변환 - map()</h4><p>스트림의 요소에 저장된 값 중에서 원하는 필드만 뽑아내거나 특정 형태로 변환해야 할 때가 있다. 이 때 사용하는 것이 <code class="language-plaintext highlighter-rouge">map()</code>이다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="nf">map</span><span class="o">(</span><span class="nc">Function</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">,?</span> <span class="kd">extends</span> <span class="no">R</span><span class="o">&gt;</span> <span class="n">mapper</span><span class="o">)</span>
</pre></table></code></div></div><p>예를 들어, <code class="language-plaintext highlighter-rouge">File</code> 스트림에서 파일명만 뽑아서 출력하고 싶을 때, <code class="language-plaintext highlighter-rouge">map()</code>을 이용하면 된다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">File</span><span class="o">&gt;</span> <span class="n">fileStream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"Ex1.java"</span><span class="o">),</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"Ex1"</span><span class="o">),</span>
        <span class="k">new</span> <span class="nf">File</span><span class="o">(</span><span class="s">"Ex1.bak"</span><span class="o">),</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"Ex2.java"</span><span class="o">),</span><span class="k">new</span> <span class="nc">File</span><span class="o">(</span><span class="s">"Ex2.txt"</span><span class="o">));</span>

<span class="n">fileStream</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">File:</span><span class="o">:</span><span class="n">getName</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">map()</code>도 중간연산이므로 하나의 스트림에 여러 번 적용할 수 있다. 다음 예제는 <code class="language-plaintext highlighter-rouge">File</code>스트림에서 파일의 확장자만 뽑은 다음 중복을 제거해서 출력한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">fileStream</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">File:</span><span class="o">:</span><span class="n">getName</span><span class="o">).</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">'.'</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">'.'</span><span class="o">)+</span><span class="mi">1</span><span class="o">)).</span><span class="na">map</span><span class="o">(</span><span class="nl">String:</span><span class="o">:</span><span class="n">toUpperCase</span><span class="o">)</span>
            <span class="o">.</span><span class="na">distinct</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><h4 id="조회---peek">조회 - peek()</h4><p>연산과 연산 사이에 올바르게 처리되었는지 확인하고 싶다면, <code class="language-plaintext highlighter-rouge">peek()</code>를 사용하자. <code class="language-plaintext highlighter-rouge">forEach()</code>와 달리, 스트림의 요소를 소모하지 않기때문에 연산 사이에 여러 번 사용해도 문제가 되지 않는다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">fileStream</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">File:</span><span class="o">:</span><span class="n">getName</span><span class="o">).</span><span class="na">filter</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">'.'</span><span class="o">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
            <span class="o">.</span><span class="na">peek</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"filename = %s%n"</span><span class="o">,</span><span class="n">s</span><span class="o">))</span>
            <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">indexOf</span><span class="o">(</span><span class="sc">'.'</span><span class="o">)+</span><span class="mi">1</span><span class="o">))</span>
            <span class="o">.</span><span class="na">peek</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"extension = %s%n"</span><span class="o">,</span><span class="n">s</span><span class="o">))</span>
            <span class="o">.</span><span class="na">distinct</span><span class="o">().</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><p>이 메소드는 <code class="language-plaintext highlighter-rouge">filter()</code>나 <code class="language-plaintext highlighter-rouge">map()</code>의 결과를 확인할 때 유용하게 사용할 수 있다.</p><h4 id="maptoint-maptolong-maptodouble">mapToInt(), mapToLong(), mapToDouble()</h4><p><code class="language-plaintext highlighter-rouge">map()</code>은 결과로 <code class="language-plaintext highlighter-rouge">Stream&lt;T&gt;</code>타입의 스트림을 반환하는데, 스트림의 요소를 숫자로 변환하는 경우, <code class="language-plaintext highlighter-rouge">IntStream</code>같은 기본형 스트림이 더 유용할 수 있다. <code class="language-plaintext highlighter-rouge">Stream&lt;T&gt;</code>타입의 스트림을 기본형 스트림으로 변환하는 메소드는 아래와 같다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">DoubleStream</span> <span class="nf">mapToDouble</span><span class="o">(</span><span class="nc">ToDoubleFunction</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">mapper</span><span class="o">)</span>
<span class="nc">IntStream</span> <span class="nf">mapToInt</span><span class="o">(</span><span class="nc">ToIntFunction</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">mapper</span><span class="o">)</span>
<span class="nc">LongStream</span> <span class="nf">mapToLong</span><span class="o">(</span><span class="nc">ToLongFunction</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">mapper</span><span class="o">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">count()</code>만 지원하는 <code class="language-plaintext highlighter-rouge">Stream&lt;T&gt;</code>과 달리 기본형 스트림은 아래와 같이 숫자를 다루는데 편리한 메소드들을 제공한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">sum</span><span class="o">()</span>
<span class="nc">OptionalDouble</span> <span class="nf">average</span><span class="o">()</span>
<span class="nc">OptionalInt</span> <span class="nf">max</span><span class="o">()</span>
<span class="nc">OptionalInt</span> <span class="nf">min</span><span class="o">()</span>
</pre></table></code></div></div><p>스트림의 요소가 하나도 없을 때, <code class="language-plaintext highlighter-rouge">sum()</code>은 0을 반환하면 되지만, 다른 메소드들은 단순히 0을 반환할 수 없기때문에 <code class="language-plaintext highlighter-rouge">Optional</code>로 값을 반환한다. 이 <code class="language-plaintext highlighter-rouge">Optional</code>클래스들에 대한 내용은 잠시 후에 자세히 다루겠다.</p><p>이 메소드들은 최종연산이므로 호출 후에 스트림이 닫힌다는 점을 주의하자. 하나의 스트림에 대해 <code class="language-plaintext highlighter-rouge">sum()</code>과 <code class="language-plaintext highlighter-rouge">average()</code>를 연속해서 호출할 수 없다.</p><p>만약 연속해서 메소드들을 사용해야 한다면 <code class="language-plaintext highlighter-rouge">summaryStatistics()</code>라는 메소드를 사용하면 편리하다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nc">IntSummaryStatistics</span> <span class="n">stat</span> <span class="o">=</span> <span class="n">scoreStream</span><span class="o">.</span><span class="na">summaryStatistics</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getCount</span><span class="o">();</span>
<span class="kt">long</span> <span class="n">totalScore</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getSum</span><span class="o">();</span>
<span class="kt">double</span> <span class="n">avgScore</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getAverage</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">minScore</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getMin</span><span class="o">();</span>
<span class="kt">int</span> <span class="n">maxScore</span> <span class="o">=</span> <span class="n">stat</span><span class="o">.</span><span class="na">getMax</span><span class="o">();</span>
</pre></table></code></div></div><p>반대로 <code class="language-plaintext highlighter-rouge">IntStream</code>을 <code class="language-plaintext highlighter-rouge">Stream&lt;T&gt;</code>으로 변환할 때는 <code class="language-plaintext highlighter-rouge">mapToObj()</code>를 사용하고, <code class="language-plaintext highlighter-rouge">Stream&lt;Integer&gt;</code>으로 변환할 때는 <code class="language-plaintext highlighter-rouge">boxed()</code>를 사용한다.</p><p>아래는 로또번호를 생성해서 출력하는 코드인데, <code class="language-plaintext highlighter-rouge">mapToObj()</code>를 이용해서 <code class="language-plaintext highlighter-rouge">IntStream</code>을 <code class="language-plaintext highlighter-rouge">Stream&lt;String&gt;</code>으로 변환한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="n">intStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">().</span><span class="na">ints</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">46</span><span class="o">);</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">lottoStream</span> <span class="o">=</span> <span class="n">intStream</span><span class="o">.</span><span class="na">distinct</span><span class="o">().</span><span class="na">limit</span><span class="o">(</span><span class="mi">6</span><span class="o">)</span>
                                            <span class="o">.</span><span class="na">sorted</span><span class="o">().</span><span class="na">mapToObj</span><span class="o">(</span><span class="n">i</span> <span class="o">-&gt;</span> <span class="n">i</span><span class="o">+</span><span class="s">","</span><span class="o">);</span>
<span class="n">lottoStream</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">print</span><span class="o">);</span>
</pre></table></code></div></div><h4 id="flatmap---streamt를-stream로-변환">flatMap() - Stream&lt;T[]&gt;를 Stream<T>로 변환</T></h4><p>스트림의 요소가 배열이거나 <code class="language-plaintext highlighter-rouge">map()</code>의 연산결과가 배열인 경우, 즉 스트림의 타입이 <code class="language-plaintext highlighter-rouge">Stream&lt;T[]&gt;</code>인 경우, <code class="language-plaintext highlighter-rouge">Stream&lt;T&gt;</code>로 다루는 것이 편할 수도 있다. 그럴 때는 <code class="language-plaintext highlighter-rouge">map()</code>대신 <code class="language-plaintext highlighter-rouge">flatMap()</code>을 사용하면 된다.</p><p>예를 들어, 아래와 같이 요소가 문자열 배열(String[])인 스트림이 있을 때,</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">[]&gt;</span> <span class="n">strArrStream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
    <span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"abc"</span><span class="o">,</span><span class="s">"def"</span><span class="o">,</span><span class="s">"ghi"</span><span class="o">},</span>
    <span class="k">new</span> <span class="nc">String</span><span class="o">[]{</span><span class="s">"ABC"</span><span class="o">,</span><span class="s">"GHI"</span><span class="o">,</span><span class="s">"JKDSA"</span><span class="o">}</span>
<span class="o">);</span>
</pre></table></code></div></div><p>각 요소의 문자열들을 합쳐서 문자열이 요소인 <code class="language-plaintext highlighter-rouge">Stream&lt;String&gt;</code>으로 만들려면 어떻게 해야할까?</p><p>먼저 스트림의 요소를 변환해야 하니 <code class="language-plaintext highlighter-rouge">map()</code>을 써야할 것이고, 여기에 배열을 스트림으로 만들어주는 <code class="language-plaintext highlighter-rouge">Arrays.stream(T[])</code>를 같이 사용해보자.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;&gt;</span> <span class="n">streamStream</span> <span class="o">=</span> <span class="n">strArrStream</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Arrays:</span><span class="o">:</span><span class="n">stream</span><span class="o">);</span>
</pre></table></code></div></div><p>의도와 달리 스트림이 <code class="language-plaintext highlighter-rouge">Stream&lt;String&gt;</code>이 아닌 <code class="language-plaintext highlighter-rouge">Stream&lt;Stream&lt;String&gt;&gt;</code>으로 변환되었다. 이 상황을 그림으로 그려보면 다음과 같다.</p><p><img data-proofer-ignore data-src="assets/../../../assets/img/collections/6.jpeg" width="600" /></p><p>각 요소의 문자열들이 합쳐지지 않고, 스트림의 스트림 형태로 되어버렸다. 이 때, 간단히 <code class="language-plaintext highlighter-rouge">map()</code>을 <code class="language-plaintext highlighter-rouge">flatMap()</code>으로 바꾸기만 하면 우리가 원하는 결과를 얻을 수 있다.</p><p><code class="language-plaintext highlighter-rouge">flatMap()</code>은 <code class="language-plaintext highlighter-rouge">map()</code>과 달리 스트림의 스트림이 아닌 스트림으로 만들어준다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stringStream</span> <span class="o">=</span> <span class="n">strArrStream</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="nl">Arrays:</span><span class="o">:</span><span class="n">stream</span><span class="o">);</span>
</pre></table></code></div></div><p>아래는 여러 문장을 요소로 하는 스트림에서 문장들을 <code class="language-plaintext highlighter-rouge">split()</code>으로 나눠서 요소가 단어인 스트림을 만드는 예제이다. 여기서 <code class="language-plaintext highlighter-rouge">flatMap()</code>이 아닌 <code class="language-plaintext highlighter-rouge">map()</code>을 사용했다면, <code class="language-plaintext highlighter-rouge">Stream&lt;String&gt;</code>이 아닌 <code class="language-plaintext highlighter-rouge">Stream&lt;Stream&lt;String&gt;&gt;</code>이 반환되었을 것이다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nc">String</span><span class="o">[]</span> <span class="n">lineArr</span> <span class="o">=</span> <span class="o">{</span>
    <span class="s">"Believe or not It is true"</span><span class="o">,</span>
    <span class="s">"Do or do not There is no try"</span>
<span class="o">};</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">stream</span><span class="o">(</span><span class="n">lineArr</span><span class="o">);</span>
<span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stringStream</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">line</span> <span class="o">-&gt;</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">line</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">)));</span>
<span class="n">stringStream</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><h3 id="optionalt와-optionalint"><strong>Optional&lt;T&gt;와 OptionalInt</strong></h3><p>앞서 잠시 언급했다시피, 최종 연산의 결과 타입이 <code class="language-plaintext highlighter-rouge">Optional</code>인 경우가 있다. <code class="language-plaintext highlighter-rouge">Optional&lt;T&gt;</code>은 제네릭 클래스로 T타입의 객체를 감싸는 래퍼 클래스다. 따라서 <code class="language-plaintext highlighter-rouge">Optional</code>타입의 객체에는 모든 타입의 참조변수를 담을 수 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="no">T</span> <span class="n">value</span><span class="o">;</span>
    <span class="o">...</span>
<span class="o">}</span>
</pre></table></code></div></div><p>최종연산의 결과를 그냥 반환하는 것이 아니라 <code class="language-plaintext highlighter-rouge">Optional</code>객체에 담아서 반환하면, 반환된 결과가 <code class="language-plaintext highlighter-rouge">null</code>인지 아닌지 매번 if문으로 체크하는 대신 <code class="language-plaintext highlighter-rouge">Optional</code>에 정의된 메소드를 통해서 간단히 처리할 수 있다.</p><p>이를 통해 <code class="language-plaintext highlighter-rouge">null</code> 체크를 위한 if문 없이도 <code class="language-plaintext highlighter-rouge">NullPointException</code>이 발생하지 않는, 보다 안전하고 간결한 코드를 작성할 수 있다.</p><h4 id="optional객체-생성하기">Optional객체 생성하기</h4><p><code class="language-plaintext highlighter-rouge">Optional</code>객체를 생성할 때는 <code class="language-plaintext highlighter-rouge">of()</code> 또는 <code class="language-plaintext highlighter-rouge">ofNullable()</code>을 사용한다.</p><p>만일 참조변수의 값이 <code class="language-plaintext highlighter-rouge">null</code>일 가능성이 있으면, <code class="language-plaintext highlighter-rouge">of()</code>대신 <code class="language-plaintext highlighter-rouge">ofNullable()</code>을 사용해야 한다. <code class="language-plaintext highlighter-rouge">of()</code>는 매개변수의 값이 <code class="language-plaintext highlighter-rouge">null</code>이면 <code class="language-plaintext highlighter-rouge">NullPointException</code>이 발생하기 때문이다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">optional1</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>         <span class="c1">//NullPointException</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">optional2</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>         <span class="c1">//ok</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">Optional&lt;T&gt;</code>타입의 참조변수를 기본값으로 초기화할 때는 <code class="language-plaintext highlighter-rouge">empty()</code>를 사용한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">optVal</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>         <span class="c1">//null로 초기화</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">optVal</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.&lt;</span><span class="nc">String</span><span class="o">&gt;</span><span class="n">empty</span><span class="o">();</span>     <span class="c1">//빈 객체로 초기화</span>
</pre></table></code></div></div><blockquote><p>empty()는 제네릭 메소드기때문에 앞에 &lt;T&gt;를 붙였다. 추정가능하므로 생략해도 된다.</p></blockquote><h4 id="optional객체의-값-가져오기">Optional객체의 값 가져오기</h4><p><code class="language-plaintext highlighter-rouge">Optional</code>객체에 저장된 값을 가져올 때는 <code class="language-plaintext highlighter-rouge">get()</code>을 사용한다. 값이 <code class="language-plaintext highlighter-rouge">null</code>일 때는 <code class="language-plaintext highlighter-rouge">NoSuchElementException</code>이 발생하며, 이를 대비해서 <code class="language-plaintext highlighter-rouge">orElse()</code>로 대체할 값을 지정할 수 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">optional</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"abc"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">str1</span> <span class="o">=</span> <span class="n">optional</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
<span class="nc">String</span> <span class="n">str2</span> <span class="o">=</span> <span class="n">optional</span><span class="o">.</span><span class="na">orElse</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">orElse()</code>의 변형으로는 <code class="language-plaintext highlighter-rouge">null</code>을 대체할 값을 변환하는 람다식을 지정하는 <code class="language-plaintext highlighter-rouge">orElseGet()</code>과 <code class="language-plaintext highlighter-rouge">null</code>일 때 지정된 예외를 발생시키는 <code class="language-plaintext highlighter-rouge">orElseThrow()</code>가 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="no">T</span> <span class="nf">ofElseGet</span><span class="o">(</span><span class="nc">Supplier</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">other</span><span class="o">)</span>
<span class="no">T</span> <span class="nf">orElseThrow</span><span class="o">(</span><span class="nc">Sipplier</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">exceptionSupplier</span><span class="o">)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">Stream</code>처럼 <code class="language-plaintext highlighter-rouge">Optional</code>객체에도 <code class="language-plaintext highlighter-rouge">filter()</code>, <code class="language-plaintext highlighter-rouge">map()</code>, <code class="language-plaintext highlighter-rouge">flatMap()</code>을 사용할 수 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="nc">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"123"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">parseInt</span><span class="o">).</span><span class="na">orElse</span><span class="o">(-</span><span class="mi">1</span><span class="o">);</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">isPresent()</code>는 <code class="language-plaintext highlighter-rouge">Optional</code>객체의 값이 <code class="language-plaintext highlighter-rouge">null</code>이면 <code class="language-plaintext highlighter-rouge">false</code>를, 아니면 <code class="language-plaintext highlighter-rouge">true</code>를 반환한다. <code class="language-plaintext highlighter-rouge">ifPresent(Consumer&lt;T&gt; block)</code>은 값이 있으면 주어진 람다식을 실행하고, 없으면 아무 일도 하지 않는다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">if</span><span class="o">(</span><span class="n">str</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">){</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>만일 위와 같은 조건문이 있다면, <code class="language-plaintext highlighter-rouge">isPresent()</code>를 이용해서 다음과 같이 쓸 수 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">if</span><span class="o">(</span><span class="nc">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="n">str</span><span class="o">).</span><span class="na">isPresent</span><span class="o">()){</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>이 코드를 <code class="language-plaintext highlighter-rouge">ifPresent()</code>를 사용하면 더 간단히 할 수 있다. 아래의 문장은 참조변수 <code class="language-plaintext highlighter-rouge">str</code>이 <code class="language-plaintext highlighter-rouge">null</code>이 아닐 때만 값을 출력하고, <code class="language-plaintext highlighter-rouge">null</code>이면 아무 일도 일어나지 않는다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">Optional</span><span class="o">.</span><span class="na">ofNullable</span><span class="o">(</span><span class="n">str</span><span class="o">).</span><span class="na">ifPresent</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">ifPresent()</code>는 <code class="language-plaintext highlighter-rouge">Optional&lt;T&gt;</code>를 반환하는 <code class="language-plaintext highlighter-rouge">findAny()</code>나 <code class="language-plaintext highlighter-rouge">findFirst()</code>와 같은 최종 연산과 잘 어울린다. <code class="language-plaintext highlighter-rouge">Stream</code>에 정의된 메소드 중에서 <code class="language-plaintext highlighter-rouge">Optional&lt;T&gt;</code>를 반환하는 것들은 다음과 같다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findAny</span><span class="o">()</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">findFirst</span><span class="o">()</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">max</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">comparator</span><span class="o">)</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">min</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">comparator</span><span class="o">)</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">reduce</span><span class="o">(</span><span class="nc">BinaryOperator</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">accumulator</span><span class="o">)</span>
</pre></table></code></div></div><h3 id="스트림의-최종-연산"><strong>스트림의 최종 연산</strong></h3><p>최종연산은 스트림의 모든 요소를 소모해서 결과를 만들어내기 때문에 연산 후에 스트림은 닫히게 되어 더 이상 사용할 수 없다. 최종 연산의 결과는 스트림 요소의 합과 같은 단일 값이거나, 스트림의 요소가 담긴 배열 또는 컬렉션일 수 있다.</p><h4 id="foreach">forEach()</h4><p><code class="language-plaintext highlighter-rouge">forEach()</code>는 <code class="language-plaintext highlighter-rouge">peek()</code>와 달리 스트림의 요소를 소모하는 최종연산이다. 반환 타입이 <code class="language-plaintext highlighter-rouge">void</code> 이므로 스트림의 요소를 출력하는 용도로 많이 사용된다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">void</span> <span class="nf">forEach</span><span class="o">(</span><span class="nc">Consumer</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">action</span><span class="o">)</span>
</pre></table></code></div></div><h4 id="조건-검사---allmatch-anymatch-nonematch-findfirst-findany">조건 검사 - allMatch(), anyMatch(), noneMatch(), findFirst(), findAny()</h4><p>스트림의 요소에 대해 지정된 조건에 모든 요소가 일치하는지, 일부가 일치하는지, 어떤 요소도 일치하지 않는지를 확인하는데 사용할 수 있는 메소드들이다. 이 메소드들은 모두 매개변수로 <code class="language-plaintext highlighter-rouge">Predicate</code>를 요구하며, 연산결과로 <code class="language-plaintext highlighter-rouge">boolean</code>을 반환한다.</p><p>예를 들어, 학생들의 성적 정보 스트림에서 총점이 100점 이하인 학생이 있는지 확인하는 방법은 다음과 같다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kt">boolean</span> <span class="n">noFailed</span> <span class="o">=</span> <span class="n">studentStream</span><span class="o">.</span><span class="na">anyMatch</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">getTotalScore</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="o">)</span>
</pre></table></code></div></div><p>이 외에도 스트림의 요소 중에서 조건에 일치하는 첫 번째 것을 반환하는 <code class="language-plaintext highlighter-rouge">findFirst()</code>가 있는데, 주로 <code class="language-plaintext highlighter-rouge">filter()</code>와 함께 조건에 맞는 스트림의 요소를 찾는데 사용한다.</p><p><code class="language-plaintext highlighter-rouge">findAny()</code>와 <code class="language-plaintext highlighter-rouge">findFirst()</code>의 반환타입은 <code class="language-plaintext highlighter-rouge">Optional&lt;T&gt;</code>이며, 스트림의 요소가 없을 때는 비어있는 <code class="language-plaintext highlighter-rouge">Optional</code>객체를 반환한다.</p><blockquote><p>비어있는 Optional객체는 내부적으로 null을 저장하고 있다.</p></blockquote><h4 id="통계---count-sum-average-max-min">통계 - count(), sum(), average(), max(), min()</h4><p>앞서 살펴본 것처럼, 기본형 스트림의 요소들에 대한 통계 정보를 얻을 수 있는 메소드들이 있다. 그러나 기본형 스트림이 아닌 경우에는 통계 관련 메소드들이 아래의 3개뿐이다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kt">long</span> <span class="nf">count</span><span class="o">()</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">max</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">min</span><span class="o">(</span><span class="nc">Comparator</span><span class="o">&lt;?</span> <span class="kd">super</span> <span class="no">T</span><span class="o">&gt;</span> <span class="n">c</span><span class="o">)</span>
</pre></table></code></div></div><p>대부분의 경우, 이 메소드를 사용하기 보다는 기본형 스트림으로 변환하거나, <code class="language-plaintext highlighter-rouge">reduce()</code> 또는 <code class="language-plaintext highlighter-rouge">collect()</code>를 사용해서 통계 정보를 얻는다.</p><h4 id="리듀싱---reduce">리듀싱 - reduce()</h4><p><code class="language-plaintext highlighter-rouge">reduce()</code>는 스트림의 요소를 줄여나가면서 연산을 수행하고 최종 결과를 반환한다. 그래서 매개변수의 타입이 <code class="language-plaintext highlighter-rouge">BinayOperator&lt;T&gt;</code>인 것이다.</p><p>처음 두 요소를 가지고 연산한 결과를 가지고 그 다음 요소와 연산한다. 이 과정에서 스트림의 요소를 하나씩 소모하다가 모든 요소를 소모하게 되면 그 결과를 반환한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nc">Optional</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">reduce</span><span class="o">(</span><span class="nc">BinaryOperator</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">accumulator</span><span class="o">)</span>
</pre></table></code></div></div><p>이 외에도 연산결과의 초기값(identity)을 갖는 <code class="language-plaintext highlighter-rouge">reduce()</code>도 있는데, 이 메소드들은 초기값과 스트림의 첫 번째 요소로 연산을 시작한다. 스트림의 요소가 하나도 없는 경우, 초기값이 반환값이 되므로 반환타입이 <code class="language-plaintext highlighter-rouge">Optional&lt;T&gt;</code>가 아니라 <code class="language-plaintext highlighter-rouge">T</code>이다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="no">T</span> <span class="nf">reduce</span><span class="o">(</span><span class="no">T</span> <span class="n">identity</span><span class="o">,</span> <span class="nc">BinaryOperator</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">accumulator</span><span class="o">)</span>
<span class="no">U</span> <span class="nf">reduce</span><span class="o">(</span><span class="no">I</span> <span class="n">identity</span><span class="o">,</span> <span class="nc">BinaryOperator</span><span class="o">&lt;</span><span class="no">U</span><span class="o">,</span><span class="no">T</span><span class="o">,</span><span class="no">U</span><span class="o">&gt;</span> <span class="n">accumulator</span><span class="o">,</span> 
                                    <span class="nc">BinaryOperator</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">combiner</span><span class="o">)</span>
</pre></table></code></div></div><p>두 번째 메소드의 마지막 매개변수인 <code class="language-plaintext highlighter-rouge">combiner</code>는 병렬 스트림에 의해 처리된 결과를 합칠 때 사용하기 위한 것이다.</p><p>또한, 앞서 설명한 <code class="language-plaintext highlighter-rouge">count()</code>와 <code class="language-plaintext highlighter-rouge">sum()</code> 등은 내부적으로 <code class="language-plaintext highlighter-rouge">reduce()</code>를 이용해서 구현되었다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">intStream</span><span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">)-&gt;</span><span class="n">a</span><span class="o">+</span><span class="mi">1</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">intStream</span><span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">)-&gt;</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">max</span> <span class="o">=</span> <span class="n">intStream</span><span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">MIN_VALUE</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">&gt;</span><span class="n">b</span><span class="o">?</span><span class="nl">a:</span><span class="n">b</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">min</span> <span class="o">=</span> <span class="n">intStream</span><span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">MAX_VALUE</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">&lt;</span><span class="n">b</span><span class="o">?</span><span class="nl">a:</span><span class="n">b</span><span class="o">);</span>
</pre></table></code></div></div><h4 id="collect"><strong>collect()</strong></h4><p><code class="language-plaintext highlighter-rouge">collect()</code>는 스트림의 요소를 수집하는 최종 연산을 앞서 배운 리듀싱과 유사하다. <code class="language-plaintext highlighter-rouge">collect()</code>가 스트림의 요소를 수집하려면 <code class="language-plaintext highlighter-rouge">collector</code>가 필요하다.</p><p>컬렉터는 <code class="language-plaintext highlighter-rouge">Collector 인터페이스</code>를 구현한 것으로, 직접 구현하거나 미리 작성된 것을 사용하면 된다. <code class="language-plaintext highlighter-rouge">Collectors 클래스</code>는 미리 작성된 다양한 종류의 컬렉터를 반환하는 <code class="language-plaintext highlighter-rouge">static method</code>를 가지고 있다.</p><blockquote><p>static 메소드를 간결하게 사용하기 위해서 Collectors 클래스를 static import하는 것이 좋다.</p></blockquote><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="no">R</span> <span class="nf">collect</span><span class="o">(</span><span class="nc">Collector</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span><span class="no">A</span><span class="o">,</span><span class="no">R</span><span class="o">&gt;</span> <span class="n">collector</span><span class="o">)</span>
<span class="no">R</span> <span class="nf">collect</span><span class="o">(</span><span class="nc">Supplier</span><span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="n">supplier</span><span class="o">,</span> <span class="nc">BiConsumer</span><span class="o">&lt;</span><span class="no">R</span><span class="o">,</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">accumulator</span><span class="o">,</span>
                                    <span class="nc">BiConsumer</span><span class="o">&lt;</span><span class="no">R</span><span class="o">,</span><span class="no">R</span><span class="o">&gt;</span> <span class="n">collector</span><span class="o">)</span>
</pre></table></code></div></div><h4 id="스트림을-컬렉션과-배열로-변환---tolist-toset-tomap-tocollection-toarray">스트림을 컬렉션과 배열로 변환 - toList(), toSet(), toMap(), toCollection(), toArray()</h4><p>스트림의 모든 요소를 컬렉션에 수집하려면 <code class="language-plaintext highlighter-rouge">Collections</code>클래스의 <code class="language-plaintext highlighter-rouge">toList()</code>와 같은 메소드를 사용하면 된다. <code class="language-plaintext highlighter-rouge">List</code>나 <code class="language-plaintext highlighter-rouge">Set</code>이 아닌 특정 컬렉션을 지정하려면, <code class="language-plaintext highlighter-rouge">toCollection()</code>에 해당 컬렉션의 생성자 참조를 매개변수로 넣어주면 된다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">names</span> <span class="o">=</span> <span class="n">studentStream</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getName</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toList</span><span class="o">());</span>

<span class="nc">ArrayList</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">names</span><span class="o">.</span><span class="na">stream</span><span class="o">()</span>
                                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toCollection</span><span class="o">(</span><span class="nl">ArrayList:</span><span class="o">:</span><span class="k">new</span><span class="o">));</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">Map</code>은 키와 값의 쌍으로 저장해야하므로 객체의 어떤 필드를 키로 사용할지와 값으로 사용할지를 지정해줘야 한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Person</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="n">personStream</span>
                            <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">toMap</span><span class="o">(</span><span class="n">p</span> <span class="o">-&gt;</span> <span class="n">p</span><span class="o">.</span><span class="na">getRegId</span><span class="o">(),</span> <span class="n">p</span><span class="o">-&gt;</span><span class="n">p</span><span class="o">));</span>
</pre></table></code></div></div><blockquote><p>위의 문장은 Map의 키를Person의 regId로 하고, 값으로 Person객체를 사용한다.</p></blockquote><p><br /></p><p>스트림에 저장된 요소들을 <code class="language-plaintext highlighter-rouge">T[]</code>타입의 배열로 변환하려면, <code class="language-plaintext highlighter-rouge">toArray()</code>를 사용하면 된다. 매개변수로 해당 타입의 생성자 참조를 지정해주면 되는데, 아무것도 지정하지 않을 경우 배열의 타입은 <code class="language-plaintext highlighter-rouge">Object[]</code>이다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Student</span><span class="o">[]</span> <span class="n">stuArr</span> <span class="o">=</span> <span class="n">studentStream</span><span class="o">.</span><span class="na">toArray</span><span class="o">(</span><span class="nc">Student</span><span class="o">[]::</span><span class="k">new</span><span class="o">);</span>
<span class="nc">Object</span><span class="o">[]</span> <span class="n">objArr</span> <span class="o">=</span> <span class="n">studentStream</span><span class="o">.</span><span class="na">toArray</span><span class="o">();</span>
</pre></table></code></div></div><h4 id="통계---counting-summinint-averagingint-maxby-minby">통계 - counting(), summinInt(), averagingInt(), maxBy(), minBy()</h4><p>앞서 살펴본 최종 연산들이 제공하는 통계 정보를 <code class="language-plaintext highlighter-rouge">collect()</code>로 똑같이 얻을 수 있다. <code class="language-plaintext highlighter-rouge">collect()</code>를 사용하지 않고도 얻을 수 있는데 굳이 <code class="language-plaintext highlighter-rouge">collect()</code>를 사용하는 이유는 이후에 <code class="language-plaintext highlighter-rouge">groupingBy()</code>와 함께 사용하면 알 수 있을 것이다.</p><h4 id="리듀싱---reducing">리듀싱 - reducing()</h4><p>리듀싱 역시 <code class="language-plaintext highlighter-rouge">collect()</code>로 가능하다. 단, <code class="language-plaintext highlighter-rouge">IntStream</code>에는 매개변수 3개짜리 <code class="language-plaintext highlighter-rouge">collect()</code>만 정의되어있기 때문에 <code class="language-plaintext highlighter-rouge">boxed()</code>를 통해 <code class="language-plaintext highlighter-rouge">IntStream</code>을 <code class="language-plaintext highlighter-rouge">Stream&lt;Integer&gt;</code>로 변환해야 매개변수 하나짜리 <code class="language-plaintext highlighter-rouge">collect()</code>를 사용할 수 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nc">IntStream</span> <span class="n">intStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">().</span><span class="na">ints</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">46</span><span class="o">).</span><span class="na">distinct</span><span class="o">().</span><span class="na">limit</span><span class="o">(</span><span class="mi">6</span><span class="o">);</span>
<span class="nc">OptionalInt</span> <span class="n">max1</span> <span class="o">=</span> <span class="n">intStream</span><span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">max</span><span class="o">);</span>
<span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">max2</span> <span class="o">=</span> <span class="n">intStream</span><span class="o">.</span><span class="na">boxed</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">reducing</span><span class="o">(</span><span class="nl">Integer:</span><span class="o">:</span><span class="n">max</span><span class="o">));</span>

<span class="kt">long</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">intStream</span><span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">);</span>
<span class="kt">long</span> <span class="n">sum2</span> <span class="o">=</span> <span class="n">intStream</span><span class="o">.</span><span class="na">boxed</span><span class="o">().</span><span class="na">collect</span><span class="o">(</span><span class="n">reducing</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">));</span>
</pre></table></code></div></div><h4 id="문자열-결합---joining">문자열 결합 - joining()</h4><p>문자열 스트림의 모든 요소를 하나의 문자열로 연결해서 반환한다. 구분자를 지정해줄 수도 있고, 접두사와 접미사를 지정할 수 있다.</p><p>스트림의 요소가 <code class="language-plaintext highlighter-rouge">String</code>이나 <code class="language-plaintext highlighter-rouge">StringBuffer</code>처럼 <code class="language-plaintext highlighter-rouge">CharSequence</code>의 자손인 경우에만 결합이 가능하므로, 스트림의 요소가 문자열이 아닌 경우 <code class="language-plaintext highlighter-rouge">map()</code>을 이용해서 스트림의 요소를 문자열로 변환해야 한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="nc">Stream</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"aaa"</span><span class="o">,</span> <span class="s">"bbb"</span><span class="o">,</span> <span class="s">"ccc"</span><span class="o">,</span> <span class="s">"ddd"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">collect</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">());</span>
<span class="n">stream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"aaa"</span><span class="o">,</span> <span class="s">"bbb"</span><span class="o">,</span> <span class="s">"ccc"</span><span class="o">,</span> <span class="s">"ddd"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">collect1</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">","</span><span class="o">));</span>
<span class="n">stream</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"aaa"</span><span class="o">,</span> <span class="s">"bbb"</span><span class="o">,</span> <span class="s">"ccc"</span><span class="o">,</span> <span class="s">"ddd"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">collect2</span> <span class="o">=</span> <span class="n">stream</span><span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="nc">Collectors</span><span class="o">.</span><span class="na">joining</span><span class="o">(</span><span class="s">","</span><span class="o">,</span> <span class="s">"["</span><span class="o">,</span> <span class="s">"]"</span><span class="o">));</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">collect</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">collect1</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">collect2</span><span class="o">);</span>
</pre></table></code></div></div><div lang="console" class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="go">aaabbbcccddd
aaa,bbb,ccc,ddd
[aaa,bbb,ccc,ddd]
</span></pre></table></code></div></div><h4 id="그룹화와-분할---groupingby-partitioningby">그룹화와 분할 - groupingBy(), partitioningBy()</h4><p>그룹화는 스트림의 요소를 특정 기준으로 그룹화하는 것을 의미하고, 분할은 스트림의 요소를 두 가지, 지정된 조건에 일치하는 그룹과 일치하지 않는 그룹으로의 분할을 의미한다.</p><p>아래의 메소드 정의에서 알 수 있듯이, <code class="language-plaintext highlighter-rouge">groupingBy()</code>는 스트림의 요소를 <code class="language-plaintext highlighter-rouge">Function</code>으로, <code class="language-plaintext highlighter-rouge">partitioningBy()</code>는 <code class="language-plaintext highlighter-rouge">Predicate</code>로 분류한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="nc">Collector</span> <span class="nf">groupingBy</span><span class="o">(</span><span class="nc">Function</span> <span class="n">classifier</span><span class="o">)</span>
<span class="nc">Collector</span> <span class="nf">groupingBy</span><span class="o">(</span><span class="nc">Function</span> <span class="n">classifier</span><span class="o">,</span> <span class="nc">Collector</span> <span class="n">downstream</span><span class="o">)</span>
<span class="nc">Collector</span> <span class="nf">groupingBy</span><span class="o">(</span><span class="nc">Function</span> <span class="n">classifier</span><span class="o">,</span><span class="nc">Supplier</span> <span class="n">mapFactory</span><span class="o">,</span><span class="nc">Collector</span> <span class="n">downstream</span><span class="o">)</span>

<span class="nc">Collector</span> <span class="nf">partitioningBy</span><span class="o">(</span><span class="nc">Predicate</span> <span class="n">predicate</span><span class="o">)</span>
<span class="nc">Collector</span> <span class="nf">partitioningBy</span><span class="o">(</span><span class="nc">Predicate</span> <span class="n">predicate</span><span class="o">,</span> <span class="nc">Collector</span> <span class="n">downstream</span><span class="o">)</span>
</pre></table></code></div></div><p>메소드의 정의를 보면 <code class="language-plaintext highlighter-rouge">groupingBy()</code>와 <code class="language-plaintext highlighter-rouge">partitioningBy()</code>가 분류를 <code class="language-plaintext highlighter-rouge">Function</code>으로 하느냐 <code class="language-plaintext highlighter-rouge">Predicate</code>로 하느냐의 차이만 있을 뿐 동일하다는 것을 알 수 있다.</p><p>스트림을 두 개의 그룹으로 나눠야 한다면, 당연히 <code class="language-plaintext highlighter-rouge">partitioningBy()</code>로 분할하는 것이 더 빠르다. 그 외에는 <code class="language-plaintext highlighter-rouge">groupingBy()</code>를 쓰면 된다. 그리고 <strong>그룹화와 분할화의 결과는 <code class="language-plaintext highlighter-rouge">Map</code>에 담겨 반환된다.</strong></p><p>메소드 정의만 보면 무슨 소린지 잘 이해되지 않을텐데, 이 메소드를 사용하는 예제를 살펴보자. 예제가 좀 길지만, 천천히 읽어보면 사용법을 알 수 있을 것이다.</p><p>참고로, <code class="language-plaintext highlighter-rouge">Collectors</code>는 <code class="language-plaintext highlighter-rouge">static import</code> 했기때문에 <code class="language-plaintext highlighter-rouge">partitioningBy()</code>나 <code class="language-plaintext highlighter-rouge">counting()</code> 등 <code class="language-plaintext highlighter-rouge">Collectors</code>의 <code class="language-plaintext highlighter-rouge">static</code> 메소드를 바로 사용할 수 있는 것이므로 유의하자.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
</pre><td class="rouge-code"><pre><span class="nd">@Getter</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">class</span> <span class="nc">Student</span><span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kt">boolean</span> <span class="n">isMale</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">hak</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">ban</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">score</span><span class="o">;</span>

    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"[%s %s %d학년 %d반, %3d점]"</span><span class="o">,</span> 
                                <span class="n">name</span><span class="o">,</span> <span class="n">isMale</span> <span class="o">?</span> <span class="s">"남"</span> <span class="o">:</span> <span class="s">"여"</span><span class="o">,</span> <span class="n">hak</span><span class="o">,</span> <span class="n">ban</span><span class="o">,</span> <span class="n">score</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">enum</span> <span class="nc">Level</span><span class="o">{</span><span class="no">HIGH</span><span class="o">,</span> <span class="no">MID</span><span class="o">,</span> <span class="no">LOW</span><span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PartitioningEx</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Student</span><span class="o">[]</span> <span class="n">studentArr</span> <span class="o">=</span> <span class="o">{</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"나자바"</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">300</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"김지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">250</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"김자바"</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">200</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"이지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">150</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"남자바"</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">100</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"안지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">50</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"황지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">100</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"강지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">150</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"이자바"</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">200</span><span class="o">),</span>

                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"나자바"</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">300</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"김지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">250</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"김자바"</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">1</span><span class="o">,</span><span class="mi">200</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"이지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">150</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"남자바"</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">100</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"안지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">50</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"황지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">100</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"강지미"</span><span class="o">,</span><span class="kc">false</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">150</span><span class="o">),</span>
                <span class="k">new</span> <span class="nf">Student</span><span class="o">(</span><span class="s">"이자바"</span><span class="o">,</span><span class="kc">true</span><span class="o">,</span><span class="mi">2</span><span class="o">,</span><span class="mi">3</span><span class="o">,</span><span class="mi">200</span><span class="o">)</span>
        <span class="o">};</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"1. 단순분할 (성별로 분할)"</span><span class="o">);</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;&gt;</span> <span class="n">studentBySex</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
                                        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">partitioningBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">isMale</span><span class="o">));</span>

        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">maleStudent</span> <span class="o">=</span> <span class="n">studentBySex</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">femaleStudent</span> <span class="o">=</span> <span class="n">studentBySex</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>

        <span class="n">maleStudent</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
        <span class="n">femaleStudent</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"2. 단순분할 + 통계 (성별 학생수)"</span><span class="o">);</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">studentNumBySex</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">partitioningBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">isMale</span><span class="o">,</span> <span class="n">counting</span><span class="o">()));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"남학생 수 "</span> <span class="o">+</span> <span class="n">studentNumBySex</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">true</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"여학생 수 "</span> <span class="o">+</span> <span class="n">studentNumBySex</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">false</span><span class="o">));</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"3. 단순분할 + 통계 (성별 1등)"</span><span class="o">);</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">,</span> <span class="nc">Optional</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;&gt;</span> <span class="n">topScoreBySex</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
                                        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">partitioningBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">isMale</span><span class="o">,</span> 
                                        <span class="n">maxBy</span><span class="o">(</span><span class="n">comparingInt</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getScore</span><span class="o">))));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"남학생 1등 : "</span><span class="o">+</span><span class="n">topScoreBySex</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">true</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"여학생 1등 : "</span><span class="o">+</span><span class="n">topScoreBySex</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">false</span><span class="o">));</span>

        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">,</span> <span class="nc">Student</span><span class="o">&gt;</span> <span class="n">topScoreBySex2</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
                                        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">partitioningBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">isMale</span><span class="o">,</span>
                                        <span class="n">collectingAndThen</span><span class="o">(</span><span class="n">maxBy</span><span class="o">(</span>
                                <span class="n">comparingInt</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getScore</span><span class="o">)),</span> <span class="nl">Optional:</span><span class="o">:</span><span class="n">get</span><span class="o">)));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"남학생 1등 : "</span><span class="o">+</span><span class="n">topScoreBySex2</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">true</span><span class="o">));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"여학생 1등 : "</span><span class="o">+</span><span class="n">topScoreBySex2</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">false</span><span class="o">));</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"4. 다중분할(성별 불합격자, 100점 이하"</span><span class="o">);</span>
        <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Boolean</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;&gt;&gt;</span> <span class="n">failedStudentBySex</span> <span class="o">=</span> 
                                                <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
                                    <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">partitioningBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">isMale</span><span class="o">,</span> 
                                    <span class="n">partitioningBy</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="n">s</span><span class="o">.</span><span class="na">getScore</span><span class="o">()</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="o">)));</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">failedMaleStudent</span> <span class="o">=</span> <span class="n">failedStudentBySex</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">true</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;</span> <span class="n">failedFemaleStudent</span> <span class="o">=</span> <span class="n">failedStudentBySex</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="kc">false</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

        <span class="n">failedMaleStudent</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
        <span class="n">failedFemaleStudent</span><span class="o">.</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div lang="console" class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="go">1. 단순분할 (성별로 분할)
[나자바 남 1학년 1반, 300점]
[김자바 남 1학년 1반, 200점]
[남자바 남 1학년 2반, 100점]
[이자바 남 1학년 3반, 200점]
[나자바 남 2학년 1반, 300점]
[김자바 남 2학년 1반, 200점]
[남자바 남 2학년 2반, 100점]
[이자바 남 2학년 3반, 200점]
[김지미 여 1학년 1반, 250점]
[이지미 여 1학년 2반, 150점]
[안지미 여 1학년 2반,  50점]
[황지미 여 1학년 3반, 100점]
[강지미 여 1학년 3반, 150점]
[김지미 여 2학년 1반, 250점]
[이지미 여 2학년 2반, 150점]
[안지미 여 2학년 2반,  50점]
[황지미 여 2학년 3반, 100점]
[강지미 여 2학년 3반, 150점]

2. 단순분할 + 통계 (성별 학생수)
남학생 수 8
여학생 수 10

3. 단순분할 + 통계 (성별 1등)
남학생 1등 : Optional[[나자바 남 1학년 1반, 300점]]
여학생 1등 : Optional[[김지미 여 1학년 1반, 250점]]
남학생 1등 : [나자바 남 1학년 1반, 300점]
여학생 1등 : [김지미 여 1학년 1반, 250점]

4. 다중분할(성별 불합격자, 100점 이하
[남자바 남 1학년 2반, 100점]
[남자바 남 2학년 2반, 100점]
[안지미 여 1학년 2반,  50점]
[황지미 여 1학년 3반, 100점]
[안지미 여 2학년 2반,  50점]
[황지미 여 2학년 3반, 100점]
</span></pre></table></code></div></div><p>3번 결과를 보면 <code class="language-plaintext highlighter-rouge">maxBy()</code>는 반환타입이 <code class="language-plaintext highlighter-rouge">Optional&lt;Student&gt;</code>라서 <code class="language-plaintext highlighter-rouge">Optional[...]</code>로 출력되는 것을 볼 수 있는데, <code class="language-plaintext highlighter-rouge">Optional&lt;Student&gt;</code>가 아닌 <code class="language-plaintext highlighter-rouge">Student</code>로 반환 받으려면, <code class="language-plaintext highlighter-rouge">collectingAndThen()</code>과 <code class="language-plaintext highlighter-rouge">Optional::get</code>을 함께 사용하면 된다.</p><h4 id="groupingby에-의한-분류">groupingBy()에 의한 분류</h4><p>앞선 예제를 활용해서 그룹화에 대해서도 알아보자. 먼저 <code class="language-plaintext highlighter-rouge">studentArr</code>을 반 별로 그룹지어 <code class="language-plaintext highlighter-rouge">Map</code>에 저장하는 방법은 다음과 같다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;&gt;</span> <span class="n">studentByBan</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
                                        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getBan</span><span class="o">));</span>
<span class="n">studentByBan</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>   <span class="c1">//1반 학생들만 출력</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">groupingBy()</code>로 그룹화를 하면 기본적으로 <code class="language-plaintext highlighter-rouge">Map</code>의 <code class="language-plaintext highlighter-rouge">value</code>를 <code class="language-plaintext highlighter-rouge">List&lt;T&gt;</code>에 담는다. 그래서 위의 문장은 <code class="language-plaintext highlighter-rouge">toList()</code>가 생략된 것과 같다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;&gt;</span> <span class="n">studentByBan</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getBan</span><span class="o">,</span> <span class="n">toList</span><span class="o">()));</span>
</pre></table></code></div></div><p>만약 <code class="language-plaintext highlighter-rouge">toList()</code> 대신 <code class="language-plaintext highlighter-rouge">toSet()</code>이나 <code class="language-plaintext highlighter-rouge">toCollection(HashSet::new)</code> 등을 사용할 수도 있다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">HashSet</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;&gt;</span> <span class="n">studentByHak</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getHak</span><span class="o">,</span> <span class="n">toCollection</span><span class="o">(</span><span class="nl">HashSet:</span><span class="o">:</span><span class="k">new</span><span class="o">)));</span>
</pre></table></code></div></div><p><br /></p><p>이번에는 조금 더 복잡하게 <code class="language-plaintext highlighter-rouge">studentArr</code>의 성적을 등급으로 나누어 그룹화해보자. 아래 문장은 모든 학생을 세 등급으로 분류하여 집계한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">.</span><span class="na">Level</span><span class="o">,</span> <span class="nc">Long</span><span class="o">&gt;</span> <span class="n">studentByLevel</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span><span class="n">s</span> <span class="o">-&gt;</span> <span class="o">{</span>
                        <span class="k">if</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">getScore</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="mi">200</span><span class="o">)</span> <span class="k">return</span> <span class="nc">Student</span><span class="o">.</span><span class="na">Level</span><span class="o">.</span><span class="na">HIGH</span><span class="o">;</span>
                        <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">s</span><span class="o">.</span><span class="na">getScore</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="mi">100</span><span class="o">)</span> <span class="k">return</span> <span class="nc">Student</span><span class="o">.</span><span class="na">Level</span><span class="o">.</span><span class="na">MID</span><span class="o">;</span>
                        <span class="k">else</span> <span class="k">return</span> <span class="nc">Student</span><span class="o">.</span><span class="na">Level</span><span class="o">.</span><span class="na">LOW</span><span class="o">;</span>
                    <span class="o">},</span> <span class="n">counting</span><span class="o">()));</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">studentByLevel</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="nc">Student</span><span class="o">.</span><span class="na">Level</span><span class="o">.</span><span class="na">HIGH</span><span class="o">));</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">groupingBy()</code>를 여러 번 사용하면, 다수준 그룹화가 가능하다. 만일 학년별로 그룹화한 후에 다시 반별로 그룹화하고 싶으면 다음과 같이 한다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Student</span><span class="o">&gt;&gt;&gt;</span> <span class="n">studentByHakAndBan</span> <span class="o">=</span>
        <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">).</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getHak</span><span class="o">,</span> 
                                            <span class="n">groupingBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getBan</span><span class="o">)));</span>

<span class="n">studentByHakAndBan</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">::</span><span class="n">println</span><span class="o">);</span>
</pre></table></code></div></div><div lang="console" class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="go">[나자바 남 2학년 1반, 300점]
[김지미 여 2학년 1반, 250점]
[김자바 남 2학년 1반, 200점]
</span></pre></table></code></div></div><p>이 코드를 발전시켜 각 반의 1등을 출력하고 싶다면, <code class="language-plaintext highlighter-rouge">collectingAndThen()</code>과 <code class="language-plaintext highlighter-rouge">maxBy()</code>를 써서 다음과 같이 하면 된다.</p><div lang="java" class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">,</span> <span class="nc">Student</span><span class="o">&gt;&gt;</span> <span class="n">topStudents</span> <span class="o">=</span> <span class="nc">Stream</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">studentArr</span><span class="o">)</span>
        <span class="o">.</span><span class="na">collect</span><span class="o">(</span><span class="n">groupingBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getHak</span><span class="o">,</span> <span class="n">groupingBy</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getBan</span><span class="o">,</span>
      <span class="n">collectingAndThen</span><span class="o">(</span><span class="n">maxBy</span><span class="o">(</span><span class="n">comparingInt</span><span class="o">(</span><span class="nl">Student:</span><span class="o">:</span><span class="n">getScore</span><span class="o">)),</span> <span class="nl">Optional:</span><span class="o">:</span><span class="n">get</span><span class="o">))));</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">topStudents</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">getScore</span><span class="o">());</span>
</pre></table></code></div></div><h2 id="참조">참조</h2><p><a href="http://www.yes24.com/Product/Goods/24259565">자바의 정석</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/backend/'>Backend</a>, <a href='/categories/java/'>Java</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/java/" class="post-tag no-text-decoration" >java</a> <a href="/tags/%EC%9E%90%EB%B0%94/" class="post-tag no-text-decoration" >자바</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[JAVA] 스트림 (Stream) - yeoji21&url=https://yeoji21.github.io/posts/stream/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[JAVA] 스트림 (Stream) - yeoji21&u=https://yeoji21.github.io/posts/stream/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[JAVA] 스트림 (Stream) - yeoji21&url=https://yeoji21.github.io/posts/stream/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink('', 'Link copied successfully!')" data-toggle="tooltip" data-placement="top" title="Copy link"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/polymorphism-inheritance/">객체지향에서의 상속과 다형성</a><li><a href="/posts/graduation-project-review/">졸업 작품 프로젝트 회고</a><li><a href="/posts/reflection-1/">[JAVA] Java Refelction 마스터 강의 1장</a><li><a href="/posts/mst/">[알고리즘] MST - 크루스칼 vs 프림</a><li><a href="/posts/injection/">[Spring] 의존성 주입 시 생성자 주입을 사용해야 하는 이유 </a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/%EC%9E%90%EB%B0%94/">자바</a> <a class="post-tag" href="/tags/java-study/">java study</a> <a class="post-tag" href="/tags/%EC%9E%90%EB%B0%94-%EC%8A%A4%ED%84%B0%EB%94%94/">자바 스터디</a> <a class="post-tag" href="/tags/oop/">oop</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/guides/">guides</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/javastudy01/"><div class="card-body"> <span class="timeago small" >Aug 8, 2021<i class="unloaded">2021-08-08T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>자바 스터디 01 - JVM이란</h3><div class="text-muted small"><p> 들어가면서 백기선님이 진행하신 자바 스터디 강의와 스터디에 참여하신 분들의 자료를 참고하여 작성한 글입니다. 강의 링크 : [자바 뉴스 라이브] 2020/11/14, 자바 스터디 1주차 깃허브 링크 : 1주차 과제: JVM은 무엇이며 자바 코드는 어떻게 실행하는 것인가. 목차 JVM이란 무엇인가 컴파일 하는 방법 실행하는 방법 바...</p></div></div></a></div><div class="card"> <a href="/posts/javastudy02/"><div class="card-body"> <span class="timeago small" >Aug 10, 2021<i class="unloaded">2021-08-10T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>자바 스터디 02 - 자바 데이터 타입, 변수 그리고 배열</h3><div class="text-muted small"><p> 들어가면서 백기선님이 진행하신 자바 스터디 강의와 스터디에 참여하신 분들의 자료를 참고하여 작성한 글입니다. 강의 링크 : [자바 뉴스 라이브] 2020/11/21, 자바 스터디 2주차 깃허브 링크 : 2주차 과제: 자바 데이터 타입, 변수 그리고 배열 목차 프리미티브 타입 종류와 값의 범위 그리고 기본 값 프리미티브 타입과 레퍼런스 타...</p></div></div></a></div><div class="card"> <a href="/posts/javastudy03/"><div class="card-body"> <span class="timeago small" >Aug 11, 2021<i class="unloaded">2021-08-11T00:00:00+09:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>자바 스터디 03 - 연산자</h3><div class="text-muted small"><p> 들어가면서 백기선님이 진행하신 자바 스터디 강의와 스터디에 참여하신 분들의 자료를 참고하여 작성한 글입니다. 강의 영상 링크 : [자바 라이브 스터디] 2020/11/28, 자바 스터디 3주차 연산자를 알아보자. 강의 깃허브 링크 : 3주차 과제: 연산자 목차 산술 연산자 비트 연산자 관계 연산자 논리 연산자 instance...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/collections/" class="btn btn-outline-primary" prompt="Older"><p>[JAVA] 컬렉션 프레임워크 (Collections Framework)</p></a> <a href="/posts/jpa-basic-1/" class="btn btn-outline-primary" prompt="Newer"><p>[JPA] JPA 기초 정리 - 1</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/username">yeoji21</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/%EC%9E%90%EB%B0%94/">자바</a> <a class="post-tag" href="/tags/java-study/">java study</a> <a class="post-tag" href="/tags/%EC%9E%90%EB%B0%94-%EC%8A%A4%ED%84%B0%EB%94%94/">자바 스터디</a> <a class="post-tag" href="/tags/oop/">oop</a> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/spring/">spring</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/guides/">guides</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://yeoji21.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script>
